<!DOCTYPE HTML>
{% extends 'bots/base.html' %}
{% load bots_template_tags %}

{%block title_block %}
	{{player.user.username}}'s profile
{%endblock%}


{%block content_block %}
{% if player %}
	<!--START PROFILE SIDEBAR-->
	<div id="section">
		<h3> {{player}} </h3>
		Player information: <br>
		Owns {{number_of_robots}} robots <br>
		Has won {{player.wins}} battles <br>
		Playing since {{ player.user.date_joined }} <br>
	</div>
	<!--END PROFILE SIDEBAR-->

	<div id="section">
	<!--START TOP 5 FOLLOWEES-->
	<h3>Friends leaderboard</h3>
	{% if top5_winning_followees %}
	<ul>
		{% for player in top5_winning_followees %}
	<li>
		<a href="{% url 'bots:show_profile' player.user.username %}">{{ player.user.username }}</a>
	</li>
		{% endfor %}	
	</ul>
		See all users you follow <br>
		{% else %}
		No followees found
		{% endif %}
	<!--END TOP 5 FOLLOWEES-->	
	</div>

	<div id="section"> <!--requires styling to switch between two orderings-->

		<!--START TOP 5 VALUABLE ROBOTS-->
		<h3>Your top 5 most valuable robots</h3>

		{% if top5_valuable_robots %}
			<ul>
				{% for robot in top5_valuable_robots %}
					<li>
						name: {{ robot.name }} <br>
						type: {{robot.type}} <br>				
					</li>
				{% endfor %}
			</ul>
			 See all robots <br>
		{% else %}
			No robots found
		{% endif %}
		<!--END TOP 5 VALUABLE ROBOTS-->

		<!--START TOP 5 WINNING ROBOTS-->
		<h3>Your top 5 winning robots</h3>

		{% if top5_winning_robots %}
			<ul>
				<!--start loop-->
				{% for robot in top5_winning_robots %}
					<li>
						name: {{ robot.name }}<br>
						type: {{robot.type}} <br>						
					</li>
				{% endfor %}
				<!--end loop-->				
			</ul>
				 See all robots <br>
		{% else %}
			<!--no robots found-->
			No robots found
		{% endif %}
		<!--END TOP 5 WINNING ROBOTS-->
		<!-- area where user can expand area to see table of all the player's robots -->
		<!-- right now doesnt account for user authentication -->
		
		<h2>Robots</h2>
		<button id="hide-show-robots-btn" value="show" type="button" >show</button>

		<table id="all-robots-table hidden="false">
			<tr>
				<th>Name</th>
				<th>Type</th>
				<th>Value</th>
				<th>Wins/Losses</th>
				{% for key in stats %}
					<th>{{ key }}</th>
				{% endfor %}
			</tr>
			{% for robot in robots %}
				<tr id="bot-row-{{ robot.id }}">
								<td>{{ robot.name }}</td>
					<td>{{ robot.type }}</td>
					<td>{{ robot.value }}</td>
					<td>{{ robot.wins }}/{{ robot.losses }}</td>
					{% for stat in stats %}
					<td id="{{ robot.id }}-{{ stat }}-td">
						{% get_bot_stat robot stat%}
					</td>
					{% endfor %}
				</tr >
			{% endfor %}
		</table>

		</div>
	{% else %}
		Player doesn't exist.
	{% endif %}

{%endblock%}


	